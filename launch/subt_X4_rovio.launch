<?xml version="1.0" encoding="UTF-8"?> 
<launch>
  <arg name="use_rviz" default="true"/>
  <arg name="publish_path" default="true" />
   
  <node pkg="rovio" type="rovio_node" name="rovio" output="screen">
    <param name="filter_config" value="$(find rovio)/cfg/subt_X4_rovio.info"/>
    <param name="camera0_config" value="$(find rovio)/cfg/subt_X4_cam0.yaml"/>
    
    <remap from="cam0/image_raw" to="D1/front/image_raw" />
    <remap from="imu0" to="D1/imu/data" />
  </node>
  
  <group if="$(arg use_rviz)">
    <node pkg="rviz" type="rviz" name="subt_rviz" args="-d $(find rovio)/cfg/subt_rovio.rviz" />
  </group>
  
  <!-- Use hector_trajectory_server to publish the path -->
  <group if="$(arg publish_path)">
    <include file="$(find hector_trajectory_server)/launch/hector_traj_server.launch">
      <arg name="target_frame_name" default="world" />
      <arg name="source_frame_name" default="imu" />
    </include>
  </group>
  
</launch>
